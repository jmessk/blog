@layer components {
    .doc {
        @apply prose max-w-none;
    }

    /* doc 以下の要素に指定 */
    .doc * {
        @apply text-paragraph;
    }

    /* 最初と最後の直下要素の外側マージンを統一 (上/下余白の跳ねを防ぐ) */
    .doc>*:first-child {
        @apply mt-0;
    }

    .doc>*:last-child {
        @apply mb-0;
    }

    /* 見出し */
    .doc h1 {
        @apply text-base font-normal text-foreground;
    }

    .doc h2 {
        @apply before:content-['##_'] before:text-muted-foreground mt-16 mb-8 scroll-mt-20 font-bold text-foreground;
    }

    .doc h3 {
        @apply before:content-['###_'] before:text-muted-foreground mt-12 mb-8 scroll-mt-20 font-bold text-foreground;
    }

    .doc h4 {
        @apply mt-8 mb-6 scroll-mt-20 font-semibold text-foreground text-lg;
    }

    /* 段落 */
    .doc p {
        @apply leading-7 my-4;
    }

    /* リスト */
    .doc ul,
    .doc ol {
        @apply my-6 marker:text-muted-foreground;
    }

    .doc li>ul,
    .doc li>ol {
        @apply my-1;
    }

    .doc:has(.toc) ol {
        @apply my-0;
    }

    /* リンク */
    .doc a {
        @apply text-link no-underline break-words;
    }

    /* 定義リスト (ラベル列固定幅 + 値可変) */
    .doc dl {
        grid-template-columns: 5rem 1fr;
        @apply grid gap-y-2 my-6;
    }

    .doc dt,
    .doc dd {
        @apply m-0;
    }

    .doc dt {
        @apply text-muted-foreground;
    }

    /* インラインコード */
    .doc :not(pre)>code {
        @apply py-0.5 px-1 rounded-sm bg-gray-100 dark:bg-neutral-800 font-normal;
    }

    .doc :not(pre)>code::before,
    .doc :not(pre)>code::after {
        content: none !important;
    }

    /* コードブロック */
    .doc .codeblock {
        @apply my-6;
    }

    .doc div.mermaid {
        @apply my-6 flex justify-center;
    }

    /* 引用 */
    .doc blockquote {
        @apply my-6 font-normal border-muted;
    }

    .doc blockquote * {
        @apply text-muted-foreground;
    }

    /* 画像 */
    .doc img {
        @apply block rounded-2xl shadow-md object-contain max-h-[500px] mx-auto;
    }

    /* .doc div.img-container {
        @apply flex justify-center;
    } */

    /* テーブル */
    .doc table {
        @apply my-6;
    }

    .doc thead {
        @apply bg-secondary;
    }

    .doc th {
        @apply px-3 py-2 border border-neutral-200 dark:border-neutral-700 font-semibold;
    }

    .doc td {
        @apply px-3 py-2 border border-neutral-200 dark:border-neutral-700;
    }

    /* .doc tbody tr:nth-child(odd) {
        @apply bg-zinc-50 dark:bg-zinc-900/40;
    } */

    /* TOC (rehype-toc) */
    .doc .table-of-contents {
        @apply my-6;
    }

    /* .doc .table-of-contents ul {
        @apply list-none pl-0 space-y-1;
    } */

    /* .doc .table-of-contents a {
        @apply no-underline hover:underline;
    } */
}